---
type: code
status: ready
labels:
- feature
- cli
target_files:
- internal/watch/watch.go
- cmd/moji/watch.go
---

# Add Real-time Watch Mode for Live ASCII Art Development

## Problem Description

When developing ASCII art or experimenting with effects, users must manually re-run commands after each source file change. A `--watch` flag would enable real-time updates, improving the creative workflow for banner design, image conversion tuning, and effect experimentation.

## Solution Approach

1. Create `internal/watch/watch.go` using `fsnotify` for cross-platform file watching
2. Add `--watch` flag to relevant subcommands (banner, convert, art)
3. Clear terminal and re-render on file changes
4. Debounce rapid changes (100ms default)
5. Show file change notifications with timestamps

## Acceptance Criteria

- [ ] Create `internal/watch/watch.go` with file watcher
- [ ] `Watch(path string, callback func()) error` main function
- [ ] `WatchMultiple(paths []string, callback func()) error` for multiple files
- [ ] Debounce mechanism (configurable, default 100ms)
- [ ] `SetDebounce(duration time.Duration)` function
- [ ] Graceful shutdown on SIGINT/SIGTERM
- [ ] Clear terminal before re-render (optional, default true)
- [ ] Add `--watch` flag to `banner` command
- [ ] Add `--watch` flag to `convert` command
- [ ] Unit tests with 80%+ coverage
- [ ] go vet passes with no errors

## Technical Notes

- Use `github.com/fsnotify/fsnotify` for file watching
- Handle both file modifications and directory watching
- Filter events to only trigger on Write operations
- Consider recursive directory watching for art directories
