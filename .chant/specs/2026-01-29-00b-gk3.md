---
type: code
status: ready
labels:
- feature
- themes
target_files:
- internal/themes/themes.go
- internal/themes/loader.go
---

# Add Custom Color Profiles and Theme System

## Problem Description

The gradient package has hardcoded themes. Users cannot define custom color schemes or share theme files. A theme system would allow users to create, save, and load custom color profiles from `~/.config/moji/themes/`.

## Solution Approach

1. Create `internal/themes/` package for theme management
2. Support YAML theme files with color definitions
3. Auto-load themes from XDG config directory
4. Merge user themes with built-in themes
5. Add theme validation and error reporting

## Acceptance Criteria

- [ ] Create `internal/themes/themes.go` with theme types
- [ ] `Theme` struct with Name, Description, Colors, Metadata
- [ ] `LoadTheme(path string) (*Theme, error)` from file
- [ ] `LoadThemesDir(dir string) ([]Theme, error)` load all themes
- [ ] `SaveTheme(theme *Theme, path string) error` save to file
- [ ] `GetTheme(name string) (*Theme, error)` lookup by name
- [ ] `ListThemes() []string` list all available themes
- [ ] `RegisterTheme(theme *Theme)` add runtime theme
- [ ] Auto-load from `~/.config/moji/themes/` on init
- [ ] YAML format with colors as hex strings (#FF0000)
- [ ] Validation for color format and theme structure
- [ ] Unit tests with 80%+ coverage
- [ ] go vet passes with no errors

## Technical Notes

- Theme YAML format:
  ```yaml
  name: "my-theme"
  description: "Custom neon colors"
  colors:
    - "#FF00FF"
    - "#00FFFF"
    - "#FFFF00"
  ```
- Use `gopkg.in/yaml.v3` for parsing
- Merge with existing gradient.Themes map
