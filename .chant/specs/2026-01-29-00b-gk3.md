---
type: code
status: completed
labels:
- feature
- themes
target_files:
- internal/themes/themes.go
- internal/themes/themes_test.go
model: claude-haiku-4-5-20251001
---
# Add Custom Color Profiles and Theme System

## Problem Description

The gradient package has hardcoded themes. Users cannot define custom color schemes or share theme files. A theme system would allow users to create, save, and load custom color profiles from `~/.config/moji/themes/`.

## Solution Approach

1. Create `internal/themes/` package for theme management
2. Support YAML theme files with color definitions
3. Auto-load themes from XDG config directory
4. Merge user themes with built-in themes
5. Add theme validation and error reporting

## Acceptance Criteria

- [x] Create `internal/themes/themes.go` with theme types
- [x] `Theme` struct with Name, Description, Colors, Metadata
- [x] `LoadTheme(path string) (*Theme, error)` from file
- [x] `LoadThemesDir(dir string) ([]Theme, error)` load all themes
- [x] `SaveTheme(theme *Theme, path string) error` save to file
- [x] `GetTheme(name string) (*Theme, error)` lookup by name
- [x] `ListThemes() []string` list all available themes
- [x] `RegisterTheme(theme *Theme)` add runtime theme
- [x] Auto-load from `~/.config/moji/themes/` on init
- [x] YAML format with colors as hex strings (#FF0000)
- [x] Validation for color format and theme structure
- [x] Unit tests with 80%+ coverage (82.8%)
- [x] go vet passes with no errors

## Technical Notes

- Theme YAML format:
  ```yaml
  name: "my-theme"
  description: "Custom neon colors"
  colors:
    - "#FF00FF"
    - "#00FFFF"
    - "#FFFF00"
  ```
- Use `gopkg.in/yaml.v3` for parsing
- Merge with existing gradient.Themes map