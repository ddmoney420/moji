---
type: code
status: completed
labels:
- architecture
- errors
target_files:
- internal/errors/errors.go
- internal/errors/errors_test.go
model: claude-haiku-4-5-20251001
---
# Add Standardized Error Types with Suggestions

## Problem Description

Error messages are inconsistent across packages. Some include suggestions, others don't. A standardized error system would improve user experience with consistent formatting and helpful suggestions.

## Solution Approach

1. Create `internal/errors/` package with custom error types
2. Include suggestion field for recovery hints
3. Add error codes for programmatic handling
4. Provide formatting helpers for CLI output

## Acceptance Criteria

- [x] Create `internal/errors/errors.go` with error types
- [x] `MojiError` struct with Code, Message, Suggestion fields
- [x] `Error()` method returns formatted message
- [x] `WithSuggestion(s string)` method for chaining
- [x] `WithCode(c int)` method for error codes
- [x] `New(msg string) *MojiError` constructor
- [x] `Wrap(err error, msg string) *MojiError` wrapper
- [x] `Is(err, target error) bool` for error matching
- [x] Predefined errors for common cases (FileNotFound, InvalidConfig, etc.)
- [x] `Format()` method for CLI-friendly output with colors
- [x] Unit tests with 90%+ coverage
- [x] go vet passes with no errors

## Technical Notes

- Implement `error` interface
- Support `errors.Is()` and `errors.As()`
- Use ANSI colors in Format() for suggestions
- Consider exit codes mapping