---
type: code
status: ready
labels:
- feature
- terminal
target_files:
- internal/imgproto/wezterm.go
- internal/imgproto/terminology.go
- internal/imgproto/imgproto.go
---

# Add Extended Terminal Protocol Support for WezTerm and Terminology

## Problem Description

The imgproto package supports Sixel, Kitty, and iTerm2 protocols. WezTerm (growing in popularity) and Terminology have their own image protocols that could expand moji's terminal compatibility.

## Solution Approach

1. Add WezTerm image protocol (uses iTerm2-compatible protocol with extensions)
2. Add Terminology inline image support
3. Update auto-detection logic for these terminals
4. Add protocol-specific optimizations

## Acceptance Criteria

- [ ] Create `wezterm.go` with WezTerm protocol support
- [ ] WezTerm detection via TERM_PROGRAM=WezTerm
- [ ] WezTerm uses iTerm2 protocol with tmux passthrough support
- [ ] Create `terminology.go` with Terminology protocol
- [ ] Terminology detection via TERMINOLOGY env var
- [ ] Terminology tycat-style escape sequences
- [ ] Update `Detect()` to check for WezTerm and Terminology
- [ ] Update `Protocol` enum with WezTerm and Terminology values
- [ ] `RenderWezTerm(img, opts) string` function
- [ ] `RenderTerminology(img, opts) string` function
- [ ] Unit tests for new protocols
- [ ] Integration tests with protocol detection
- [ ] go vet passes with no errors

## Technical Notes

- WezTerm: Mostly iTerm2 compatible, check `TERM_PROGRAM=WezTerm`
- Terminology: Uses `\033}is#W;H;` escape sequence
- Both support true color and transparency
- Consider tmux/screen passthrough for WezTerm
